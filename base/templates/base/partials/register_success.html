{% extends 'base.html' %}

{% block content %}

<div class="relative flex min-h-screen w-full flex-col overflow-x-hidden">
    <div class="layout-container flex h-full grow flex-col">

        <main class="flex flex-1 flex-col items-center justify-center px-4 py-12">
            <div class="max-w-[800px] w-full flex flex-col items-center">
                <!-- Success Header -->
                <div class="mb-8 text-center">
                    <div
                        class="inline-flex items-center justify-center w-20 h-20 rounded-full bg-primary/10 border border-primary/30 mb-6">
                        <span class="material-symbols-outlined text-primary text-4xl">check_circle</span>
                    </div>
                    <h1 class="gold-gradient-text text-4xl md:text-5xl font-extrabold tracking-tight mb-4">
                        Registration Confirmed</h1>
                    <p class="text-slate-400 text-lg max-w-lg mx-auto leading-relaxed">
                        Welcome to the elite circle of 120 graduates. Your journey in the Luxury Gift Exchange has
                        officially begun.
                    </p>
                </div>
                <!-- Main Success Card (Glassmorphism) -->
                <div
                    class="glass-card w-full rounded-xl p-8 md:p-12 flex flex-col items-center text-center shadow-2xl relative overflow-hidden">
                    <!-- Abstract Background Decoration -->
                    <div class="absolute -top-24 -right-24 w-64 h-64 bg-primary/5 rounded-full blur-3xl"></div>
                    <div class="absolute -bottom-24 -left-24 w-64 h-64 bg-primary/5 rounded-full blur-3xl"></div>
                    <div class="relative z-10 w-full">
                        <div class="flex flex-col md:flex-row items-center gap-8 mb-10">
                            <div
                                class="w-full md:w-1/2 aspect-square rounded-xl overflow-hidden border border-primary/20 shadow-inner group">
                                <div class="w-full h-full bg-cover bg-center transition-transform duration-700 group-hover:scale-110"
                                    data-alt="Elegant graduation cap and luxury diploma scroll"
                                    style='background-image: url("https://lh3.googleusercontent.com/aida-public/AB6AXuDGIfhMp042V7cvcFcDXviO_UsZyBGe1SncM_i5S3WY4buFMpw3QGUC-RJnugS-epydW2It850KcpHOlQmExjmhfyxllKUKuhHzSpZ5_tpxSjreAjofgIU2ouRwDwv6z0BfO8wuMfEAJQQFLkWn0YTzDiH3Lmh0DpXilrNjlWMPFKrjoWSwjNLCI2FYY0E8TRjs_WPM-pR_ZEREZI_m_Mxey9MsktyijIjSs0CDGyOsE6Mr1Gj9IDamLYWYU8gVZZhV0dp_cURFGQ");'>
                                </div>
                            </div>
                            <div class="w-full md:w-1/2 text-left">
                                <h3 class="text-2xl font-bold text-slate-100 mb-3">Participation Secured</h3>
                                <p class="text-slate-400 mb-4 leading-relaxed">
                                    You are successfully enrolled as participant #0{{participant.id}}. Prepare for an
                                    evening of
                                    unparalleled sophistication and surprise.
                                </p>
                                <div class="flex items-center gap-2 text-primary font-semibold">
                                    <span class="material-symbols-outlined">event_note</span>
                                    <span>Reveal Day {{event.reveal_datetime}}</span>
                                </div>
                            </div>
                        </div>
                        <!-- Token Section -->
                        <div class="w-full p-1 rounded-xl bg-gradient-to-r from-primary/40 via-primary to-primary/40">
                            <div
                                class="bg-background-dark rounded-lg p-6 flex flex-col md:flex-row items-center justify-between gap-6">
                                <div class="text-left flex flex-col gap-1">
                                    <h4 class="text-xs font-bold uppercase tracking-[0.2em] text-primary">Unique
                                        Access Token</h4>
                                    <div class="flex items-center gap-3">
                                        <p id="access-code" data-reveal-code="{{ participant.reveal_token }}" class="text-2xl font-mono font-medium text-slate-300 tracking-widest">
                                            •••• •••• ••••</p>
                                        <span class="material-symbols-outlined text-slate-500 text-sm">lock</span>
                                    </div>
                                </div>
                                <button id="reveal-token-btn" type="button"
                                    class="w-full md:w-auto flex min-w-[160px] cursor-pointer items-center justify-center rounded-lg h-12 px-8 bg-primary text-background-dark text-sm font-bold uppercase tracking-widest hover:brightness-110 transition-all shadow-[0_0_20px_rgba(212,175,53,0.3)]">
                                    Reveal Token
                                </button>
                            </div>
                        </div>
                        <p class="mt-8 text-slate-500 text-sm italic">
                            <span class="material-symbols-outlined text-xs align-middle mr-1">info</span>
                            Save this token carefully. You will need it on reveal day.
                        </p>
                    </div>
                </div>
                <!-- Footer Actions -->
                <div class="mt-10 flex flex-col items-center gap-6">
                    <a class="flex items-center gap-2 text-primary hover:text-primary/80 font-medium transition-colors group"
                        href="{% url 'landing' %}">
                        <span
                            class="material-symbols-outlined group-hover:-translate-x-1 transition-transform">arrow_back</span>
                        Back to Home
                    </a>
                    <div class="flex gap-4">
                        <button
                            class="p-3 rounded-full border border-primary/20 text-primary hover:bg-primary/10 transition-colors">
                            <span class="material-symbols-outlined">share</span>
                        </button>
                        <button
                            class="p-3 rounded-full border border-primary/20 text-primary hover:bg-primary/10 transition-colors">
                            <span class="material-symbols-outlined">download</span>
                        </button>
                        <button
                            class="p-3 rounded-full border border-primary/20 text-primary hover:bg-primary/10 transition-colors">
                            <span class="material-symbols-outlined">print</span>
                        </button>
                    </div>
                </div>
            </div>
        </main>
    </div>
</div>

<script>
    document.addEventListener("DOMContentLoaded", function () {
        const revealButton = document.getElementById("reveal-token-btn");
        const accessCode = document.getElementById("access-code");

        if (!revealButton || !accessCode) return;

        revealButton.addEventListener("click", function () {
            accessCode.textContent = accessCode.dataset.revealCode || "";
            revealButton.disabled = true;
            revealButton.classList.add("opacity-70", "cursor-default");
            revealButton.textContent = "Token Revealed";
        });
    });
</script>

{% endblock %}
